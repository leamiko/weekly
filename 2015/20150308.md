##苏州市融合通信重点实验室周报(3月2日——3月8日)
	作者：姚善良 iat                   小组：PHP                        时间：2015年3月8日
###进度报告
#####本周完成的事情
* 学习WebSocket基本知识，完成
 * [WebSocket 协议](http://iat.net.cn/websocket-3.html)
 * 路灯项目代码的部署与修改

#####待解决问题及下一步计划
* 路灯项目新版的编写

###简述
 * 握手部分中重要的是Sec-WebSocket-Accept的计算，其中Sec-WebSocket-Accept响应首标由Sec-WebSocket-Key请求首标计算而来，包含特殊的响应键值。 这两组键值实际上是为了保护非WebSocket服务器，避免跨协议攻击。握手时要求服务端返回客户端期望收到的键值，如果客户端没有收到或与期望的键值不一致，服务端会返回“Error during WebSocket handshake: Sec-WebSocket-Accept mismatch”，然后客户端会关闭连接。那么Sec-WebSocket-Accept怎么计算得来呢？
  * 在Sec-WebSocket-Key键值后添加258EAFA5-E914-47DA-95CA-C5AB0DC85B11（GUID，全局唯一标识符)
  * SHA1转换
  * Base64编码
 * 这样一来得到Sec-WebSocket-Accept并返回给客户端，客户端检查和期望的一致后，连接建立。
 * 客户端发送到服务端的所有帧通过一个包含在帧中的 32 位值来掩码。掩码键是由客户端随机选择的 32 位值。当准备一个掩码的帧时,客户端必须从允许的 32 位值集合中选择一个新的掩码键。
 * 完成WebSocket的协议部分，WebSocket协议中重要的是数据侦的格式，其数据侦中定义了不同操作码的功能，不同数据的格式，能够实现可变数据侦的传递。
服务端收到掩码处理后的数据后，解码采用如下的算法。将Payload原始数据的每个字符的顺序下标模4，然后将此原始数据字符与掩码的模4相应位置的字符进行异或操作。这个算法对于加密和解密的操作都是一样的。
 * 路灯部分由于数据库做出了修改，所以旧版的代码在新版的数据库上是错误的。目前在修改其中的代码，修改数据库中读取数据的字段，能够提供框架给下一步的开发。
